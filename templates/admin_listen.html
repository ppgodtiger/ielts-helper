<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>作文信息页</title>
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="//cdn.staticfile.org/layui/2.9.7/css/layui.css" rel="stylesheet">
    <script src="//unpkg.com/layui@2.9.7/dist/layui.js"></script>
</head>
<body>
<div class="layui-layout layui-layout-admin ">
  <div class="layui-header">
  <div class="layui-logo layui-hide-xs layui-bg-black layui-font-22">Admin系统</div>
    <!-- 头部区域（可配合layui 已有的水平导航） -->
    <ul class="layui-nav layui-layout-left">
      <!-- 移动端显示 -->
      <li class="layui-nav-item layui-show-xs-inline-block layui-hide-sm" lay-header-event="menuLeft">
        <i class="layui-icon layui-icon-spread-left"></i>
      </li>
      <li class="layui-nav-item layui-hide-xs"><a href="{{ ('admin_index') }}">首页</a></li>
      <li class="layui-nav-item">
      </li>
    </ul>
    <ul class="layui-nav layui-layout-right">
      <li class="layui-nav-item layui-hide layui-show-sm-inline-block">
        <a href="javascript:;">
          <img src="//unpkg.com/outeres@0.0.10/img/layui/icon-v2.png" class="layui-nav-img">
          tester
        </a>
        <dl class="layui-nav-child">
          <dd><a href="{{ ('logout') }}">Sign out</a></dd>
        </dl>
      </li>
      <li class="layui-nav-item" lay-header-event="menuRight" lay-unselect>
        <a href="javascript:;">
          <i class="layui-icon layui-icon-more-vertical"></i>
        </a>
      </li>
    </ul>
  </div>
 <div class="layui-side layui-bg-black">
    <div class="layui-side-scroll">
      <!-- 左侧导航区域（可配合layui已有的垂直导航） -->
      <ul class="layui-nav layui-nav-tree" lay-filter="test">
        <li class="layui-nav-item layui-nav-itemed">
          <a class="layui-font-20" href="javascript:;"><i class="layui-icon layui-icon-username" style="font-size: 30px; color: #1E9FFF;"></i>学生用户管理</a>
          <dl class="layui-nav-child">
            <dd><a class="layui-font-18" href="{{ ('stu_info') }}">基本信息管理</a></dd>
            <dd><a class="layui-font-18" href="{{ ('student_m')}}">背词数据</a></dd>
          </dl>
        </li>
        <li class="layui-nav-item">
          <a class="layui-font-20" href="javascript:;"><i class="layui-icon layui-icon-read" style="font-size: 30px; color: #1E9FFF;"></i>作文管理</a>
          <dl class="layui-nav-child">
            <dd><a class="layui-font-18" href="{{ ('zuowen_info') }}">基本信息</a></dd>
            <dd><a class="layui-font-18" href="{{ ('zuowen_jilu') }}">批改数据</a></dd>
          </dl>
            <li class="layui-nav-item">
          <a class="layui-font-20" href="javascript:;"><i class="layui-icon layui-icon-email" style="font-size: 30px; color: #1E9FFF;"></i>论坛管理</a>
            <dl class="layui-nav-child">
            <dd><a class="layui-font-18" href="{{ ('luntan_info') }}">论坛信息</a></dd>
          </dl>
          <a class="layui-font-20" href="javascript:;"><i class="layui-icon layui-icon-template-1" style="font-size: 30px; color: #1E9FFF;"></i>真题管理</a>
            <dl class="layui-nav-child">
            <dd><a class="layui-font-18" href="{{ ('yuedu_info') }}">阅读真题管理</a></dd>
                <dd><a class="layui-font-18" href="{{ ('listen_info') }}">听力真题管理</a></dd>
            </dl>
          <a class="layui-font-20" href="javascript:;"><i class="layui-icon layui-icon-chart" style="font-size: 30px; color: #1E9FFF;"></i>rank信息管理</a>
            <dl class="layui-nav-child">
            <dd><a class="layui-font-18" href="{{ ('rank') }}">学生rank信息</a></dd>
          </dl>
          <a class="layui-font-20" href="javascript:;"><i class="layui-icon layui-icon-chart-screen" style="font-size: 30px; color: #1E9FFF;"></i>视频信息管理</a>
            <dl class="layui-nav-child">
            <dd><a class="layui-font-18" href="{{ ('video_info') }}">视频管理</a></dd>
          </dl>
      </li>
      </ul>
    </div>
  </div>
  <div class="layui-body">
    <!-- 内容主体区域 -->
    <div style="padding: 15px;">
      <blockquote class="layui-elem-quote layui-text layui-font-28">
        您好，管理员，请查看阅读真题
      </blockquote>
      <div class="layui-card layui-panel">
        <div class="layui-card-header layui-font-22">
          真题信息
        </div>
        <div class="layui-card-body layui-font-20">
                <div class="layui-card-header" >
          阅读真题信息位置
        </div>
            <table id = "yuedu_zhenti" lay-filter="test"></table>

            <script type="text/html" id="toolbarDemo">

              <div class="layui-btn-container">
                  <button class="layui-btn layui-btn-sm" lay-event="add">添加</button>
              </div>
            </script>
            <script type="text/html" id = "caozuo">

                <button type="button" class="layui-btn layui-bg-orange layui-btn-sm" lay-event="del">删除</button>
            </script>


            <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
            <script type = "text/javascript">
  layui.use(["table", "layer", "form"], function() {
    var table = layui.table;
    var layer = layui.layer;
    var form = layui.form;

    table.render({
      elem:"#yuedu_zhenti",
      url:"/get_listen_zhenti_list",
      method:'get',
      cols:[[
        {field:'question_id',title:'听力题目id',sort:true, width:150},
        {field:'question_image',title:'听力题目位置', width:250},
        {field: '操作',title:'操作',toolbar:'#caozuo'},
      ]],
      page:true,
      toolbar: "#toolbarDemo"
    });
    table.on('tool(test)', function(obj){
      var data = obj.data; // 获取当前行数据
      var timu_id = data['timu_id']; // 获取题目ID

      // 发送AJAX请求到后端进行删除操作
      $.ajax({
        url: '/#', // 请确认您的后端删除接口地址
        type: 'POST',
        data: { timu_id: timu_id }, // 发送需要删除的数据标识
        success: function(response) {
          // 处理删除成功的逻辑
          layer.msg('删除成功');
          table.reload('yuedu_zhenti'); // 重新加载表格
        },
        error: function(xhr, status, error) {
          // 处理错误
          layer.msg('删除失败');
        }
      });
    });
    // 绑定添加按钮事件
    table.on('toolbar(test)', function(obj){
      if(obj.event === 'add'){
        // 创建模态框
        layer.open({
          type: 1, // 页面层
          title: '添加阅读真题',
          area: ['500px', '300px'], // 宽高
          content: '<form class="layui-form" id="addForm" style="margin: 20px;">' +
                    '<div class="layui-form-item">' +
                    '<label class="layui-form-label">题目ID</label>' +
                    '<div class="layui-input-block">' +
                    '<input type="text" name="timu_id" required lay-verify="required" placeholder="请输入题目ID" autocomplete="off" class="layui-input">' +
                    '</div></div>' +
                    '<div class="layui-form-item">' +
                    '<label class="layui-form-label">题目位置</label>' +
                    '<div class="layui-input-block">' +
                    '<input type="text" name="timu" required lay-verify="required" placeholder="请输入题目位置" autocomplete="off" class="layui-input">' +
                    '</div></div>' +
                    '<div class="layui-form-item">' +
                    '<div class="layui-input-block">' +
                    '<button type="button" class="layui-btn" lay-submit lay-filter="addForm">立即提交</button>' +
                    '<button type="reset" class="layui-btn layui-btn-primary">重置</button>' +
                    '</div></div>' +
                    '</form>',
          success: function(layero, index){
            // 表单提交监听
            form.on('submit(addForm)', function(data){
              $.ajax({
                url: '#',
                type: 'POST',
                data: data.field,
                success: function(response) {
                  // 关闭模态框
                  layer.close(index);
                  // 重新加载表格
                  table.reload('yuedu_zhenti');
                },
                error: function(xhr, status, error) {
                  // 处理错误
                }
              });
              return false; // 阻止表单跳转
            });
          }
        });
      }
    });
  });

</script>
      </div>
        </div>
      </div>
      <br><br>
    </div>
  </div>
  <div class="layui-footer">
    <!-- 底部固定区域 -->
    底部固定区域
  </div>
</div>
</body>
</html>